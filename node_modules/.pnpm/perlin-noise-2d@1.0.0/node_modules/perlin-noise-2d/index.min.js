import seedrandom from"seedrandom";const{alea:alea}=seedrandom,smoothstep=t=>t*t*t*(t*(6*t-15)+10),interpolation=(t,o,r)=>t+(o-t)*smoothstep(r),dotProduct=(t,o)=>t[0]*o[0]+t[1]*o[1];export default class PerlinNoise{constructor(t,o,r=Math.floor(4294967296*Math.random())){this.random=alea(r.toString()),this.vectors=this._createVectorField(t,o)}_dotProdGrid(t,o,r,e){const a=this.vectors[e][r],d=[t-r,o-e];return dotProduct(a,d)}_createRandomVector(){const t=this.random()*Math.PI*2;return[Math.cos(t),Math.sin(t)]}_createVectorField(t,o){return Array(o+1).fill([]).map(()=>Array(t+1).fill(0).map(()=>this._createRandomVector()))}perlin(t,o){const[r,e]=[Math.floor(t),Math.floor(o)],[a,d]=[r+1,e+1],i=[this._dotProdGrid(t,o,r,e),this._dotProdGrid(t,o,a,e),this._dotProdGrid(t,o,r,d),this._dotProdGrid(t,o,a,d)];return interpolation(interpolation(i[0],i[1],t-r),interpolation(i[2],i[3],t-r),o-e)}}
